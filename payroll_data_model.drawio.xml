<mxfile host="app.diagrams.net" modified="2025-10-22T00:00:00.000Z" agent="5.0" version="21.0.0" etag="ERD-Payroll-Module" type="device">
    <diagram id="PayrollModuleERD" name="Payroll Data Relationships">
        <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
            <root>
                <mxCell id="0" />
                <mxCell id="1" parent="0" />

                <!-- Employee Table (from existing OrangeHRM) -->
                <mxCell id="employee" value="&lt;b&gt;Employee&lt;/b&gt;&lt;hr&gt;employee_id (PK)&lt;br&gt;first_name&lt;br&gt;last_name&lt;br&gt;email&lt;br&gt;employment_status&lt;br&gt;department_id&lt;br&gt;job_title_id&lt;br&gt;bank_account_number&lt;br&gt;bank_name&lt;br&gt;bank_routing_number" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;" vertex="1" parent="1">
                    <mxGeometry x="80" y="80" width="200" height="200" as="geometry" />
                </mxCell>

                <!-- Salary Components Master -->
                <mxCell id="salary_components" value="&lt;b&gt;Salary Components&lt;/b&gt;&lt;hr&gt;component_id (PK)&lt;br&gt;component_name&lt;br&gt;component_type&lt;br&gt;(earning/deduction/benefit)&lt;br&gt;calculation_method&lt;br&gt;(fixed/percentage/formula)&lt;br&gt;default_amount&lt;br&gt;is_taxable&lt;br&gt;display_order&lt;br&gt;is_active" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF4C3;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="680" y="80" width="220" height="200" as="geometry" />
                </mxCell>

                <!-- Employee Salary Configuration -->
                <mxCell id="emp_salary_config" value="&lt;b&gt;Employee Salary Configuration&lt;/b&gt;&lt;hr&gt;salary_config_id (PK)&lt;br&gt;employee_id (FK)&lt;br&gt;basic_salary&lt;br&gt;currency&lt;br&gt;payment_frequency&lt;br&gt;(monthly/bi-weekly/weekly)&lt;br&gt;effective_from_date&lt;br&gt;effective_to_date&lt;br&gt;pay_grade&lt;br&gt;is_active&lt;br&gt;created_by&lt;br&gt;created_date" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="80" y="360" width="240" height="230" as="geometry" />
                </mxCell>

                <!-- Employee Salary Components -->
                <mxCell id="emp_salary_components" value="&lt;b&gt;Employee Salary Components&lt;/b&gt;&lt;hr&gt;emp_component_id (PK)&lt;br&gt;salary_config_id (FK)&lt;br&gt;component_id (FK)&lt;br&gt;amount&lt;br&gt;percentage&lt;br&gt;calculation_basis&lt;br&gt;effective_from_date&lt;br&gt;effective_to_date&lt;br&gt;is_active" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="400" y="360" width="240" height="200" as="geometry" />
                </mxCell>

                <!-- Payroll Period -->
                <mxCell id="payroll_period" value="&lt;b&gt;Payroll Period&lt;/b&gt;&lt;hr&gt;period_id (PK)&lt;br&gt;period_name&lt;br&gt;start_date&lt;br&gt;end_date&lt;br&gt;payment_date&lt;br&gt;status&lt;br&gt;(draft/processing/completed/cancelled)&lt;br&gt;total_employees&lt;br&gt;total_gross_amount&lt;br&gt;total_net_amount&lt;br&gt;processed_by&lt;br&gt;processed_date&lt;br&gt;approved_by&lt;br&gt;approved_date" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;" vertex="1" parent="1">
                    <mxGeometry x="1000" y="360" width="240" height="280" as="geometry" />
                </mxCell>

                <!-- Payroll Transactions -->
                <mxCell id="payroll_transactions" value="&lt;b&gt;Payroll Transactions&lt;/b&gt;&lt;hr&gt;transaction_id (PK)&lt;br&gt;period_id (FK)&lt;br&gt;employee_id (FK)&lt;br&gt;salary_config_id (FK)&lt;br&gt;gross_salary&lt;br&gt;total_earnings&lt;br&gt;total_deductions&lt;br&gt;net_salary&lt;br&gt;payment_method&lt;br&gt;(bank/check/cash)&lt;br&gt;payment_status&lt;br&gt;payment_date&lt;br&gt;worked_days&lt;br&gt;absent_days&lt;br&gt;leave_days&lt;br&gt;overtime_hours&lt;br&gt;created_date&lt;br&gt;updated_date" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="680" y="720" width="240" height="340" as="geometry" />
                </mxCell>

                <!-- Payroll Transaction Details -->
                <mxCell id="transaction_details" value="&lt;b&gt;Payroll Transaction Details&lt;/b&gt;&lt;hr&gt;detail_id (PK)&lt;br&gt;transaction_id (FK)&lt;br&gt;component_id (FK)&lt;br&gt;component_name&lt;br&gt;component_type&lt;br&gt;calculated_amount&lt;br&gt;calculation_notes&lt;br&gt;is_manual_adjustment&lt;br&gt;adjusted_by&lt;br&gt;adjustment_reason" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="1000" y="720" width="240" height="220" as="geometry" />
                </mxCell>

                <!-- Payslips -->
                <mxCell id="payslips" value="&lt;b&gt;Payslips&lt;/b&gt;&lt;hr&gt;payslip_id (PK)&lt;br&gt;transaction_id (FK)&lt;br&gt;payslip_number&lt;br&gt;generated_date&lt;br&gt;file_path&lt;br&gt;file_name&lt;br&gt;email_sent&lt;br&gt;email_sent_date&lt;br&gt;employee_viewed&lt;br&gt;viewed_date&lt;br&gt;pdf_generated&lt;br&gt;generation_status" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;" vertex="1" parent="1">
                    <mxGeometry x="360" y="720" width="240" height="250" as="geometry" />
                </mxCell>

                <!-- Time & Attendance (existing module) -->
                <mxCell id="time_attendance" value="&lt;b&gt;Time &amp;amp; Attendance&lt;/b&gt;&lt;hr&gt;attendance_id (PK)&lt;br&gt;employee_id (FK)&lt;br&gt;date&lt;br&gt;clock_in&lt;br&gt;clock_out&lt;br&gt;total_hours&lt;br&gt;overtime_hours&lt;br&gt;status" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;" vertex="1" parent="1">
                    <mxGeometry x="1320" y="80" width="200" height="180" as="geometry" />
                </mxCell>

                <!-- Leave Management (existing module) -->
                <mxCell id="leave_management" value="&lt;b&gt;Leave Management&lt;/b&gt;&lt;hr&gt;leave_id (PK)&lt;br&gt;employee_id (FK)&lt;br&gt;leave_type&lt;br&gt;start_date&lt;br&gt;end_date&lt;br&gt;days_count&lt;br&gt;is_paid&lt;br&gt;status" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;" vertex="1" parent="1">
                    <mxGeometry x="1320" y="300" width="200" height="180" as="geometry" />
                </mxCell>

                <!-- Audit Log -->
                <mxCell id="audit_log" value="&lt;b&gt;Audit Log&lt;/b&gt;&lt;hr&gt;log_id (PK)&lt;br&gt;table_name&lt;br&gt;record_id&lt;br&gt;action_type&lt;br&gt;(insert/update/delete)&lt;br&gt;user_id&lt;br&gt;timestamp&lt;br&gt;old_values&lt;br&gt;new_values&lt;br&gt;ip_address" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
                    <mxGeometry x="1320" y="540" width="200" height="200" as="geometry" />
                </mxCell>

                <!-- Relationships -->

                <!-- Employee to Employee Salary Configuration (1:M) -->
                <mxCell id="rel1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="employee" target="emp_salary_config">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>
                <mxCell id="rel1_label" value="has salary history" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel1">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Employee Salary Config to Employee Salary Components (1:M) -->
                <mxCell id="rel2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="emp_salary_config" target="emp_salary_components">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>
                <mxCell id="rel2_label" value="contains" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel2">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Salary Components to Employee Salary Components (1:M) -->
                <mxCell id="rel3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="salary_components" target="emp_salary_components">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="790" y="320" />
                            <mxPoint x="520" y="320" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel3_label" value="references" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel3">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Payroll Period to Payroll Transactions (1:M) -->
                <mxCell id="rel4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="payroll_period" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="960" y="500" />
                            <mxPoint x="960" y="805" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel4_label" value="includes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel4">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint x="10" as="offset" />
                    </mxGeometry>
                </mxCell>

                <!-- Employee to Payroll Transactions (1:M) -->
                <mxCell id="rel5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="employee" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="40" y="230" />
                            <mxPoint x="40" y="805" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel5_label" value="receives payroll" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel5">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint x="15" as="offset" />
                    </mxGeometry>
                </mxCell>

                <!-- Employee Salary Config to Payroll Transactions (1:M) -->
                <mxCell id="rel6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="emp_salary_config" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="200" y="680" />
                            <mxPoint x="740" y="680" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel6_label" value="uses configuration" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel6">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Payroll Transactions to Transaction Details (1:M) -->
                <mxCell id="rel7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="payroll_transactions" target="transaction_details">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>
                <mxCell id="rel7_label" value="breaks down into" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel7">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Salary Components to Transaction Details (1:M) -->
                <mxCell id="rel8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="salary_components" target="transaction_details">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1120" y="230" />
                            <mxPoint x="1120" y="680" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel8_label" value="references" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel8">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint x="10" as="offset" />
                    </mxGeometry>
                </mxCell>

                <!-- Payroll Transactions to Payslips (1:1) -->
                <mxCell id="rel9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=ERone;startArrow=ERone;startFill=0;endFill=0;" edge="1" parent="1" source="payroll_transactions" target="payslips">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>
                <mxCell id="rel9_label" value="generates" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel9">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Employee to Time & Attendance (1:M) -->
                <mxCell id="rel10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;dashed=1;" edge="1" parent="1" source="employee" target="time_attendance">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1280" y="130" />
                            <mxPoint x="1280" y="170" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel10_label" value="tracks time" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel10">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Employee to Leave Management (1:M) -->
                <mxCell id="rel11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;dashed=1;" edge="1" parent="1" source="employee" target="leave_management">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1280" y="180" />
                            <mxPoint x="1280" y="390" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel11_label" value="applies for leave" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel11">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

                <!-- Time & Attendance to Payroll Transactions (integration) -->
                <mxCell id="rel12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;endArrow=none;startArrow=none;startFill=0;endFill=0;dashed=1;dashPattern=5 5;" edge="1" parent="1" source="time_attendance" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1420" y="805" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel12_label" value="feeds hours data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel12">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint x="15" as="offset" />
                    </mxGeometry>
                </mxCell>

                <!-- Leave Management to Payroll Transactions (integration) -->
                <mxCell id="rel13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=none;startArrow=none;startFill=0;endFill=0;dashed=1;dashPattern=5 5;" edge="1" parent="1" source="leave_management" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1420" y="890" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel13_label" value="feeds leave data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel13">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint x="15" as="offset" />
                    </mxGeometry>
                </mxCell>

                <!-- Legend -->
                <mxCell id="legend_box" value="&lt;b&gt;LEGEND&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;align=left;verticalAlign=top;fontStyle=1;" vertex="1" parent="1">
                    <mxGeometry x="80" y="1000" width="300" height="160" as="geometry" />
                </mxCell>

                <mxCell id="legend_new" value="New Payroll Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#d79b00;align=left;" vertex="1" parent="1">
                    <mxGeometry x="100" y="1030" width="160" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend_existing" value="Existing OrangeHRM Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;align=left;" vertex="1" parent="1">
                    <mxGeometry x="100" y="1060" width="160" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend_config" value="Configuration Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82b366;align=left;" vertex="1" parent="1">
                    <mxGeometry x="100" y="1090" width="160" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend_line1" value="" style="endArrow=ERone;startArrow=ERmany;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startFill=0;endFill=0;" edge="1" parent="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="100" y="1130" as="sourcePoint" />
                        <mxPoint x="150" y="1130" as="targetPoint" />
                    </mxGeometry>
                </mxCell>
                <mxCell id="legend_label1" value="One-to-Many Relationship" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
                    <mxGeometry x="160" y="1117" width="170" height="30" as="geometry" />
                </mxCell>

                <mxCell id="legend_line2" value="" style="endArrow=none;startArrow=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;dashPattern=5 5;" edge="1" parent="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="100" y="1145" as="sourcePoint" />
                        <mxPoint x="150" y="1145" as="targetPoint" />
                    </mxGeometry>
                </mxCell>
                <mxCell id="legend_label2" value="Integration/Data Feed" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
                    <mxGeometry x="160" y="1132" width="140" height="30" as="geometry" />
                </mxCell>

                <!-- Title -->
                <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;OrangeHRM 5.7 Payroll Module - Entity Relationship Diagram&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="400" y="20" width="600" height="30" as="geometry" />
                </mxCell>

                <!-- Notes -->
                <mxCell id="notes_box" value="&lt;b&gt;KEY RELATIONSHIPS&lt;/b&gt;&lt;hr&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Each Employee can have multiple Salary Configurations over time (salary history)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Each Salary Configuration contains multiple Salary Components&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Payroll Period generates Transactions for multiple Employees&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Each Transaction breaks down into multiple Detail line items&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Each Transaction generates one Payslip document&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;• Time &amp;amp; Attendance and Leave modules feed data into Payroll Transactions&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#CC9900;align=center;verticalAlign=top;" vertex="1" parent="1">
                    <mxGeometry x="420" y="1000" width="520" height="160" as="geometry" />
                </mxCell>

                <!-- Tax Configuration Table -->
                <mxCell id="tax_config" value="&lt;b&gt;Tax Configuration&lt;/b&gt;&lt;hr&gt;tax_config_id (PK)&lt;br&gt;tax_name&lt;br&gt;tax_type&lt;br&gt;(progressive/flat/percentage)&lt;br&gt;jurisdiction&lt;br&gt;tax_brackets (JSON)&lt;br&gt;effective_from_date&lt;br&gt;effective_to_date&lt;br&gt;is_active" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFF4C3;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="1000" y="80" width="220" height="200" as="geometry" />
                </mxCell>

                <!-- Tax Config to Payroll Transactions -->
                <mxCell id="rel14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;endArrow=ERmany;startArrow=ERone;startFill=0;endFill=0;dashed=1;" edge="1" parent="1" source="tax_config" target="payroll_transactions">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1110" y="680" />
                            <mxPoint x="860" y="680" />
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="rel14_label" value="applies tax rules" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="rel14">
                    <mxGeometry x="-0.1" y="2" relative="1" as="geometry">
                        <mxPoint as="offset" y="-10" />
                    </mxGeometry>
                </mxCell>

            </root>
        </mxGraphModel>
    </diagram>
</mxfile>